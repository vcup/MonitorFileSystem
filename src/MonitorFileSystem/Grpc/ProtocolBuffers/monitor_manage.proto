syntax = "proto3";

import "google/protobuf/empty.proto";

option csharp_namespace = "MonitorFileSystem.Grpc.ProtocolBuffers";

service MonitorManagement {
  rpc CreateWatcher        (WatcherRequest)             returns (google.protobuf.Empty);
  rpc RemoveWatcher        (WatcherRequest)             returns (google.protobuf.Empty);
  rpc DisableWatcher       (WatcherRequest)             returns (google.protobuf.Empty);
  rpc EnableWatcher        (WatcherRequest)             returns (google.protobuf.Empty);
  rpc ToggleWatcher        (WatcherRequest)             returns (google.protobuf.Empty);
  
  rpc CreateGroup          (GroupRequest)               returns (google.protobuf.Empty);
  rpc RemoveGroup          (GroupRequest)               returns (google.protobuf.Empty);
  rpc AddWatcherTo         (WatcherAndGroupRequest)     returns (google.protobuf.Empty);
  rpc AddManyWatcherTo     (ManyWatcherAndGroupRequest) returns (google.protobuf.Empty);
  rpc AddWatcherToMany     (WatcherAndManyGroupRequest) returns (google.protobuf.Empty);
  rpc RemoveWatcherFor     (WatcherAndGroupRequest)     returns (google.protobuf.Empty);
  rpc RemoveManyWatcherFor (ManyWatcherAndGroupRequest) returns (google.protobuf.Empty);
  rpc RemoveWatcherForMany (WatcherAndManyGroupRequest) returns (google.protobuf.Empty);
  
  rpc ClearUpAll           (google.protobuf.Empty)      returns (google.protobuf.Empty);
  rpc ClearWatcher         (google.protobuf.Empty)      returns (google.protobuf.Empty);
  rpc ClearGroup           (google.protobuf.Empty)      returns (google.protobuf.Empty);
}

enum Event {
  None          = 0   ;
  Created       = 1   ;
  Deleted       = 2   ;
  Renamed       = 4   ;
  Changed       = 6136;
  FileName      = 16  ; // >>4 : 1
  DirectoryName = 32  ; // >>4 : 2
  Attributes    = 64  ; // >>4 : 4
  Size          = 128 ; // >>4 : 8
  LastWrite     = 256 ; // >>4 : 16
  LastAccess    = 512 ; // >>4 : 32
  CreationTime  = 1024; // >>4 : 64
  Security      = 4096; // >>4 : 256
}

message WatcherRequest {
  string name = 1;
  string path = 2;
  string filter = 3;
  
  oneof event {
    Event event_value = 4;
  }
}

message GroupRequest {
  string name = 1;
  string description = 2;
}

message ManyWatcherRequest {
  repeated WatcherRequest watchers = 1;
}

message ManyGroupRequest {
  repeated GroupRequest watchers = 1;
}

message WatcherAndGroupRequest {
  WatcherRequest watcher = 1;
  GroupRequest group = 2;
}

message ManyWatcherAndGroupRequest {
  repeated WatcherRequest watchers = 1;
  GroupRequest group = 2;
}

message WatcherAndManyGroupRequest {
  WatcherRequest watcher = 1;
  repeated GroupRequest groups = 2;
}

message ManyWatcherAndManyGroupRequest {
  repeated WatcherRequest watchers = 1;
  repeated GroupRequest groups = 2;
}